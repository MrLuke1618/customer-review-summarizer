import{jsx as e,jsxs as t,Fragment as rt}from"react/jsx-runtime";import at,{useState as v,useRef as ie,useEffect as ce,useCallback as G}from"react";import Wt from"react-dom/client";import{GoogleGenAI as V,Type as f}from"@google/genai";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(r){if(r.ep)return;r.ep=!0;const d=n(r);fetch(r.href,d)}})();async function _t(s,o,n,i){const r=new V({apiKey:s}),d=n.toLowerCase()==="auto-detect",p=`
    You are a world-class expert in customer feedback analysis for a global company. You have been provided with some background context about the product/service being reviewed. Use this context to better understand the customer feedback.

    --- CONTEXT ---
    ${i||"No context provided."}
    --- END CONTEXT ---

    Your task is to analyze a dataset of customer reviews and provide a clear, concise, and insightful summary.

    The data provided is a raw text dump containing multiple customer reviews. From this data, you must perform the following actions:
    1.  **Language Handling**: ${d?"First, automatically detect the predominant language of the customer reviews. All subsequent analysis and the final summary must be in this detected language.":`First, identify the primary language of the reviews. If it is not ${n}, mentally translate them before analysis. The final summary must be written in ${n}.`}
    2.  **Extract Key Points**:
        - **Pros**: Identify positive points, compliments, and aspects customers liked.
        - **Cons**: Identify negative points, complaints, and areas for improvement.
        - **Common Themes**: Identify recurring topics, features, or issues mentioned across multiple reviews.
    3.  **Perform Sentiment Analysis**: Tally the reviews to determine sentiment. Count how many reviews are clearly positive, negative, and neutral. A neutral review might be one that just states facts or has a balanced mix of mild pros and cons.
    4.  **Generate Actionable Insights**: Based on the common themes and cons, infer 1 to 3 potential root causes for the problems. For each root cause, suggest a concrete, actionable step the company can take to address it.
    5.  **Extract Top Keywords**: Identify the top 10-15 most frequently mentioned nouns or noun phrases that are specific and meaningful (e.g., "battery life", "customer service", "screen quality"). Exclude generic, non-descriptive words like "product", "item", "review", or "thing". For each keyword, provide its frequency count, sorted from most to least frequent.

    Analyze the following customer review data:
    ---
    ${o}
    ---

    Return the complete summary in a single, structured JSON object. Ensure all string values in the JSON are plain text without any markdown characters (like *, **, _, #). Do not include any introductory text outside the JSON object.
  `;try{const m=(await r.models.generateContent({model:"gemini-2.5-flash",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:f.OBJECT,properties:{pros:{type:f.ARRAY,description:"A list of positive points and compliments from the reviews.",items:{type:f.STRING}},cons:{type:f.ARRAY,description:"A list of negative points and complaints from the reviews.",items:{type:f.STRING}},themes:{type:f.ARRAY,description:"A list of recurring topics or common themes mentioned in the reviews.",items:{type:f.STRING}},sentiment:{type:f.OBJECT,description:"A breakdown of review sentiment counts.",properties:{positive:{type:f.NUMBER},negative:{type:f.NUMBER},neutral:{type:f.NUMBER}}},insights:{type:f.ARRAY,description:"A list of actionable insights, including root causes and suggestions.",items:{type:f.OBJECT,properties:{cause:{type:f.STRING,description:"The inferred root cause of an issue."},suggestion:{type:f.STRING,description:"A suggested actionable step to address the cause."}}}},keywords:{type:f.ARRAY,description:"A list of the top 10-15 most frequent keywords and their frequencies.",items:{type:f.OBJECT,properties:{keyword:{type:f.STRING,description:"The extracted keyword."},frequency:{type:f.NUMBER,description:"How many times the keyword appeared."}},required:["keyword","frequency"]}}},required:["pros","cons","themes","sentiment","insights","keywords"]}}})).text;if(!m)throw new Error("The model did not return a valid summary. The response was empty.");const w=m.trim();return JSON.parse(w)}catch(b){throw console.error("Error summarizing reviews:",b),b instanceof Error?new Error(`Failed to process reviews. Gemini API error: ${b.message}`):new Error("An unknown error occurred while summarizing reviews.")}}async function Xt(s,o,n){const i=new V({apiKey:s}),r=n.toLowerCase()==="auto-detect",d=`
    You are a seasoned data analyst and business strategist. You have been given a summary of customer feedback. Your task is to provide a high-level strategic analysis for a customer service team.

    Based on the following data summary:
    ---
    ${JSON.stringify(o,null,2)}
    ---

    Please generate a strategic analysis in ${r?"the same language as the provided summary data":n}. Your analysis should include:
    1.  **Overview**: A brief, high-level summary of the overall customer sentiment and key takeaways.
    2.  **Key Focus Area**: Identify the single most critical theme or problem from the 'cons' and 'themes' that requires immediate attention.
    3.  **Strategic Steps**: Provide 2-3 high-level, strategic next steps for the customer team.
    4.  **Rationale**: For each step, provide a clear, concise rationale explaining *why* it's important and how it addresses the data.

    Return the analysis as a single, structured JSON object. Ensure all string values in the JSON are plain text without any markdown characters (like *, **, _, #). Do not include any introductory text outside the JSON object.
  `;try{const b=(await i.models.generateContent({model:"gemini-2.5-pro",contents:d,config:{responseMimeType:"application/json",responseSchema:{type:f.OBJECT,properties:{overview:{type:f.STRING,description:"A brief, high-level summary of the customer feedback."},keyFocusArea:{type:f.STRING,description:"The single most critical issue or theme to focus on."},steps:{type:f.ARRAY,description:"A list of strategic next steps with their rationale.",items:{type:f.OBJECT,properties:{step:{type:f.STRING,description:"A concrete strategic step for the team."},rationale:{type:f.STRING,description:"The reasoning behind why this step is recommended, based on the data."}},required:["step","rationale"]}}},required:["overview","keyFocusArea","steps"]}}})).text;if(!b)throw new Error("The model did not return a valid strategic analysis. The response was empty.");const m=b.trim();return JSON.parse(m)}catch(p){throw console.error("Error generating strategic analysis:",p),p instanceof Error?new Error(`Failed to generate strategic analysis. Gemini API error: ${p.message}`):new Error("An unknown error occurred while generating the strategic analysis.")}}async function Kt(s,o,n,i){const r=new V({apiKey:s}),d=n.toLowerCase()==="auto-detect",p=`
        You are an empathetic and highly professional customer service agent.
        You have the following background context about the product/service:
        --- CONTEXT ---
        ${i||"No context provided."}
        --- END CONTEXT ---

        A customer has left the following complaint:
        --- COMPLAINT ---
        "${o}"
        --- END COMPLAINT ---

        Your task is to draft a concise, helpful, and non-robotic response in ${d?"the same language as the complaint":n}, using the provided context to make your answer more specific and accurate if possible.
        The response should:
        1. Acknowledge the customer's specific problem and validate their frustration.
        2. Apologize for the negative experience.
        3. Briefly suggest a next step for resolution (e.g., "Our support team will reach out," "Here is a link to our help center," or "Could you provide your order number?"). Refer to specific features or policies from the context if relevant.
        4. Do not make promises you can't keep.
        
        Generate only the response text. The response must be plain text and should not contain any markdown formatting (e.g., no asterisks for bolding, no bullet points).
    `;try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:p})).text??"Sorry, I was unable to generate a reply at this time."}catch(b){return console.error("Error generating draft reply:",b),"Sorry, I was unable to generate a reply at this time."}}async function Jt(s,o,n,i,r){const d=new V({apiKey:s}),p=i.toLowerCase()==="auto-detect",b=`
        You are a data analyst AI assistant. You have been provided with a dataset of customer reviews and some background context about the product/service. Your job is to answer questions based *only* on the information contained within the reviews and the context. Do not use any external knowledge. If the answer cannot be found, state that clearly. Your answer must be plain text without any markdown formatting (no asterisks, underscores, bullet points, etc.).

        Here is the background context on the product/service:
        --- CONTEXT ---
        ${r||"No context provided."}
        --- END CONTEXT ---
        
        The customer review data is as follows:
        --- REVIEWS ---
        ${o}
        --- END REVIEWS ---

        Now, please answer this question in ${p?"the same language as the question":i}: "${n}"
    `;try{return(await d.models.generateContent({model:"gemini-2.5-flash",contents:b})).text??"Sorry, I encountered an error trying to answer your question."}catch(m){return console.error("Error answering question:",m),"Sorry, I encountered an error trying to answer your question."}}async function Qt(s,o,n){const i=new V({apiKey:s}),r=`
    You are a data analyst AI. Your task is to help a user explore a dataset of customer reviews by suggesting insightful questions.
    Based on the following product context and raw customer review data, generate 3 to 4 interesting and relevant questions a user might want to ask.

    --- PRODUCT CONTEXT ---
    ${n||"No context provided."}
    --- END CONTEXT ---

    --- CUSTOMER REVIEWS (sample) ---
    ${o.substring(0,2e3)}...
    --- END REVIEWS ---

    The questions should:
    - Be concise and easy to understand.
    - Go beyond simple keyword searches (e.g., instead of "What about the battery?", ask "What are the biggest complaints regarding battery life?").
    - Be directly answerable from the provided review data.

    Return the result as a single, structured JSON array of strings. Do not include any introductory text.
  `;try{const p=(await i.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:f.ARRAY,description:"A list of 3-4 suggested questions to ask about the review data.",items:{type:f.STRING}}}})).text;if(!p)throw new Error("The model did not return any suggested questions. The response was empty.");const b=p.trim();return JSON.parse(b)}catch(d){throw console.error("Error generating suggested questions:",d),d instanceof Error?new Error(`Failed to generate questions. Gemini API error: ${d.message}`):new Error("An unknown error occurred while generating suggested questions.")}}async function Zt(s){const o=new V({apiKey:s}),n=`
    Generate a realistic-looking sample dataset of 15 customer reviews for a fictional product called "AcoustiMax Pro Headphones".
    The data should be in CSV format with four columns: "Reviewer Name", "Rating (1-5)", "Customer Type", and "Comment".
    For "Customer Type", use values like "New User", "Power User", "Commuter", and "Audiophile".
    Include a mix of positive, negative, and neutral reviews. The comments should be detailed enough to be useful for analysis and reflect the likely priorities of each customer type.
    Do not include any introductory text or explanation, only the raw CSV data including the header row.
  `;try{const r=(await o.models.generateContent({model:"gemini-2.5-flash",contents:n})).text;if(!r)throw new Error("The model did not return any sample data. The response was empty.");return r}catch(i){throw console.error("Error generating sample reviews:",i),i instanceof Error?new Error(`Failed to generate sample data. Gemini API error: ${i.message}`):new Error("An unknown error occurred while generating sample data.")}}async function es(s,o,n,i,r,d){const p=new V({apiKey:s}),b=d.toLowerCase()==="auto-detect",m=`
        You are an expert business analyst specializing in customer feedback trends. You have been provided with two summaries of customer feedback from two different time periods or sources.

        The first summary, labeled "${i}", is as follows:
        --- START SUMMARY ---
        ${JSON.stringify(o,null,2)}
        --- END START SUMMARY ---

        The second summary, labeled "${r}", is as follows:
        --- END SUMMARY ---
        ${JSON.stringify(n,null,2)}
        --- END END SUMMARY ---

        Your task is to perform a comparative trend analysis in ${b?"the same language as the provided summaries":d}. Your output must be a structured JSON object.

        Please perform the following analysis:
        1.  **Narrative Summary**: Write a concise, high-level summary (2-3 sentences) that describes the key changes in customer feedback between "${i}" and "${r}". Mention shifts in sentiment and any notable new or disappearing themes.
        2.  **New Issues**: Identify specific "cons" or negative "themes" that appear in the "${r}" summary but are NOT present in the "${i}" summary. These are emerging problems.
        3.  **Resolved Issues**: Identify specific "cons" or negative "themes" from the "${i}" summary that are NO LONGER present in the "${r}" summary. These are problems that appear to have been fixed.
        4.  **Persistent Themes**: Identify recurring "themes" (positive or negative) that are present and significant in BOTH summaries.

        Return the complete analysis as a single, structured JSON object. Ensure all string values in the JSON are plain text without any markdown characters.
    `;try{const A=(await p.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:f.OBJECT,properties:{summary:{type:f.STRING,description:"A brief narrative summary of the key trends and changes between the two reports."},newIssues:{type:f.ARRAY,description:`Negative themes or cons that appeared in the second report ("${r}") but not the first ("${i}").`,items:{type:f.STRING}},resolvedIssues:{type:f.ARRAY,description:`Negative themes from the first report ("${i}") that are no longer present in the second ("${r}").`,items:{type:f.STRING}},persistentThemes:{type:f.ARRAY,description:"Common themes that are present in both reports.",items:{type:f.STRING}}},required:["summary","newIssues","resolvedIssues","persistentThemes"]}}})).text;if(!A)throw new Error("The model did not return a valid trend analysis. The response was empty.");const E=A.trim();return JSON.parse(E)}catch(w){throw console.error("Error generating trend analysis:",w),w instanceof Error?new Error(`Failed to generate trend analysis. Gemini API error: ${w.message}`):new Error("An unknown error occurred while generating the trend analysis.")}}async function ts(s,o,n,i,r){const d=new V({apiKey:s}),p=i.toLowerCase()==="auto-detect",b=`
        You are a data analysis AI. You have been given a dataset of customer reviews, background product context, and a specific topic (a keyword or theme). Your task is to perform a deep-dive analysis on that specific topic based *only* on the provided reviews.

        --- PRODUCT CONTEXT ---
        ${r||"No context provided."}
        --- END CONTEXT ---

        --- CUSTOMER REVIEWS ---
        ${o}
        --- END REVIEWS ---

        The topic to analyze is: "${n}"

        Perform the following actions and return the result as a single, structured JSON object in ${p?"the same language as the reviews":i}:
        1.  **Extract Relevant Snippets**: Find and list all direct quotes or sentences from the reviews that explicitly mention or are clearly about the topic "${n}".
        2.  **Generate a Mini-Summary**: Write a concise, 1-2 sentence summary of what customers are saying about "${n}" based *only* on the extracted snippets.
        3.  **Perform Sentiment Analysis**: Based *only* on the extracted snippets, count how many are positive, negative, and neutral in their sentiment towards "${n}".

        Ensure all string values in the JSON are plain text without any markdown characters.
    `;try{const w=(await d.models.generateContent({model:"gemini-2.5-flash",contents:b,config:{responseMimeType:"application/json",responseSchema:{type:f.OBJECT,properties:{summary:{type:f.STRING,description:`A concise summary of customer feedback about the topic: ${n}.`},snippets:{type:f.ARRAY,description:`A list of direct quotes from reviews that mention the topic: ${n}.`,items:{type:f.STRING}},sentiment:{type:f.OBJECT,description:`A sentiment breakdown for only the snippets related to the topic: ${n}.`,properties:{positive:{type:f.NUMBER},negative:{type:f.NUMBER},neutral:{type:f.NUMBER}},required:["positive","negative","neutral"]}},required:["summary","snippets","sentiment"]}}})).text;if(!w)throw new Error("The model did not return a valid deep dive analysis. The response was empty.");const A=w.trim();return JSON.parse(A)}catch(m){throw console.error("Error generating deep dive analysis:",m),m instanceof Error?new Error(`Failed to generate deep dive analysis. Gemini API error: ${m.message}`):new Error("An unknown error occurred while generating the deep dive analysis.")}}async function ss(s,o,n){const i=new V({apiKey:s}),r=n.toLowerCase()==="auto-detect",d=`
        You are a market research analyst AI. You have been given several summaries of customer feedback, each corresponding to a different customer segment (persona). Your task is to perform a comparative analysis to highlight the unique differences between these segments.

        Here are the feedback summaries for each segment:
        --- DATA ---
        ${JSON.stringify(o,null,2)}
        --- END DATA ---

        Please perform the following analysis in ${r?"the same language as the provided summaries":n} and return the result as a single, structured JSON object:
        1.  **Overall Overview**: Write a brief, high-level overview (2-3 sentences) summarizing the most significant differences or similarities in feedback across all the customer segments.
        2.  **Segment-Specific Differentiators**: For each individual segment, analyze its summary (pros, cons, themes) in comparison to all other segments. Identify 2-3 key points of feedback that are either unique to this segment or significantly more prominent than in others. These should be the most defining characteristics of their experience.

        The goal is to understand what makes each customer segment distinct. Focus on contrast and uniqueness. Do not just list their pros and cons; explain what makes them different from the others.
    `;try{const b=(await i.models.generateContent({model:"gemini-2.5-pro",contents:d,config:{responseMimeType:"application/json",responseSchema:{type:f.OBJECT,properties:{overview:{type:f.STRING,description:"A brief, high-level summary comparing all customer segments."},segmentComparisons:{type:f.ARRAY,description:"A list of analyses for each segment, highlighting their unique feedback.",items:{type:f.OBJECT,properties:{segment:{type:f.STRING,description:"The name of the customer segment."},keyDifferentiators:{type:f.ARRAY,description:"A list of 2-3 key feedback points that are unique or most prominent for this segment compared to others.",items:{type:f.STRING}}},required:["segment","keyDifferentiators"]}}},required:["overview","segmentComparisons"]}}})).text;if(!b)throw new Error("The model did not return a valid persona comparison. The response was empty.");const m=b.trim();return JSON.parse(m)}catch(p){throw console.error("Error generating persona comparison:",p),p instanceof Error?new Error(`Failed to generate persona comparison. Gemini API error: ${p.message}`):new Error("An unknown error occurred while generating the persona comparison.")}}async function rs(s,o){var r;const n=new V({apiKey:s}),i=`
    Based on the following CSV header row, identify the single column name that most likely represents a customer segment, persona, or user type (e.g., "Customer Type", "User Segment", "Subscription Plan", "Region").

    Return ONLY the column name as a plain string, without any explanation, quotes, or punctuation. If no such column is obvious, return an empty string.

    Header:
    ---
    ${o}
    ---
  `;try{return((r=(await n.models.generateContent({model:"gemini-2.5-flash",contents:i})).text)==null?void 0:r.trim().replace(/^"|"$/g,""))??""}catch(d){throw console.error("Error suggesting segment column:",d),d instanceof Error?new Error(`Failed to suggest column. Gemini API error: ${d.message}`):new Error("An unknown error occurred while suggesting a column.")}}const Ee=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"})}),Re=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"})}),me=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7zM9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1z"})}),K=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5z"})}),as=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})}),Ae=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5z"})}),we=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),nt=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),de=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}),lt=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"})}),ot=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6.3 6.3 9 1.2 3.9C.1 6.3-.3 9.3 1.3 11.3c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l4-4c.4-.4.4-1 0-1.4z"})}),it=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V4c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"})}),ns=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),$e=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}),ls=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6h-6z"})}),os=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6h-6z"})}),is=({className:s})=>t("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:[e("path",{d:"M10 4V2h4v2h-4zM4 10v4h2v-4H4zm2 8v-2H4v2h2zm0-12V4H4v2h2zm12 0V4h-2v2h2zm2 0h2V4h-2v2zm-2 12v2h2v-2h-2zm-4 4h4v-2h-4v2zm-4-16h-2v2h2V4zm0 16v-2h-2v2h2z",opacity:".3"}),e("path",{d:"M20 6h-2V4h2V2h-4v2h2v2h-2v2h2v2h-2v2h2v-2h2V8h-2V6zm-4 4h-2v2h2v-2zm-4 0H8v2h4v-2zm-4-4H4v2h4V6zm10 12h2v-2h-2v2zm-4 0h2v-2h-2v2zm-4 0h2v-2H8v2zm-4 0h2v-2H4v2z"})]}),ct=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),Te=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})}),cs=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"})}),ds=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1.5V10H22V8h-7.01V5L11 9l3.99 3.5z"})}),ms=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),hs=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M19 2h-4.18C14.4.84 13.3 0 12 0S9.6.84 9.18 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"})}),us=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})}),ps=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"})}),gs=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M5 9.2h3V19H5zM10.6 5h3v14h-3zm5.6 8H19v6h-2.8z"})}),fs=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6h-6zm-4 14h10v-2H12v2zM2 10h10V8H2v2zm4 6h10v-2H6v2z"})}),xs=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),dt=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})}),bs=({className:s})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M21.582,6.186c-0.23-0.86-0.908-1.538-1.768-1.768C18.254,4,12,4,12,4S5.746,4,4.186,4.418 c-0.86,0.23-1.538,0.908-1.768,1.768C2,7.746,2,12,2,12s0,4.254,0.418,5.814c0.23,0.86,0.908,1.538,1.768,1.768 C5.746,20,12,20,12,20s6.254,0,7.814-0.418c0.861-0.23,1.538-0.908,1.768-1.768C22,16.254,22,12,22,12S22,7.746,21.582,6.186z M10,15.464V8.536L16,12L10,15.464z"})}),ws=({complaint:s,language:o,context:n,apiKey:i})=>{const[r,d]=v(!1),[p,b]=v(null),[m,w]=v(!1),A=async()=>{d(!0),b(null);const z=await Kt(i,s,o,n);b(z),d(!1)},E=()=>{p&&navigator.clipboard.writeText(p).then(()=>{w(!0),setTimeout(()=>w(!1),2e3)})};return p?t("div",{className:"mt-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[e("p",{className:"text-sm text-slate-700 dark:text-slate-200 whitespace-pre-wrap",children:p}),e("div",{className:"mt-2 flex justify-end",children:t("button",{onClick:E,className:"inline-flex items-center text-xs font-medium text-purple-500 dark:text-purple-400 hover:underline",children:[m?e(de,{className:"w-4 h-4 mr-1 text-emerald-500"}):e(nt,{className:"w-4 h-4 mr-1"}),m?"Copied":"Copy"]})})]}):e("div",{className:"mt-2 flex justify-end",children:t("button",{onClick:A,disabled:r,className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-purple-500 hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-purple-400",children:[r?t("svg",{className:"animate-spin -ml-0.5 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e(lt,{className:"w-4 h-4 mr-1"}),r?"Drafting...":"Draft Reply"]})})},ve=({title:s,items:o,icon:n,iconBgColor:i,iconTextColor:r,language:d,context:p,apiKey:b,onItemClick:m})=>e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:t("div",{className:"p-6",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center",children:[e("div",{className:`flex-shrink-0 p-3 rounded-full ${i}`,children:e("div",{className:`h-6 w-6 ${r}`,children:n})}),e("h3",{className:"ml-4 text-xl font-semibold text-slate-800 dark:text-slate-100",children:s})]}),o&&e("span",{className:"text-sm font-semibold bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full px-3 py-1",children:o.length})]}),e("div",{className:"mt-4 text-slate-600 dark:text-slate-300",children:o&&o.length>0?e("ul",{className:"space-y-1",children:o.map((w,A)=>e("li",{children:s==="Common Themes"&&m?e("button",{onClick:()=>m(w),className:"w-full text-left p-2 rounded-md transition-colors hover:bg-slate-100 dark:hover:bg-slate-700/40 focus:outline-none focus:ring-2 focus:ring-purple-400",children:t("div",{className:"flex items-start",children:[e("svg",{className:"flex-shrink-0 h-5 w-5 text-purple-500 mr-2 mt-0.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e("span",{children:w})]})}):t("div",{className:"p-2 rounded-md",children:[t("div",{className:"flex items-start",children:[e("svg",{className:"flex-shrink-0 h-5 w-5 text-purple-500 mr-2 mt-0.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e("span",{children:w})]}),s==="Cons"&&e(ws,{complaint:w,language:d,context:p,apiKey:b})]})},A))}):e("p",{className:"text-sm text-slate-500 italic",children:"No items found."})})]})}),vs=({insights:s,icon:o,iconBgColor:n,iconTextColor:i})=>e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:t("div",{className:"p-6",children:[t("div",{className:"flex items-center",children:[e("div",{className:`flex-shrink-0 p-3 rounded-full ${n}`,children:e("div",{className:`h-6 w-6 ${i}`,children:o})}),e("h3",{className:"ml-4 text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Actionable Insights"})]}),e("div",{className:"mt-4 space-y-4",children:s&&s.length>0?s.map((r,d)=>t("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/40 rounded-lg",children:[t("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:[e("span",{className:"text-rose-500 font-bold",children:"Cause: "}),r.cause]}),t("p",{className:"mt-1 text-slate-600 dark:text-slate-300",children:[e("span",{className:"text-emerald-500 font-bold",children:"Suggestion: "}),r.suggestion]})]},d)):e("p",{className:"text-sm text-slate-500 italic",children:"No specific insights generated."})})]})}),mt=({data:s})=>{const n={top:20,right:20,bottom:50,left:40},r=n.left+n.right+Math.max(0,s.length-1)*120,d=Math.max(500,r),p=Math.max(0,...s.flatMap(k=>[k.summary.sentiment.positive,k.summary.sentiment.negative,k.summary.sentiment.neutral])),m=(k=>{if(k===0)return 5;const C=Math.pow(10,Math.floor(Math.log10(k))),O=k/C;let P;return O<1.5?P=1.5:O<2?P=2:O<3?P=3:O<4?P=4:O<5?P=5:O<8?P=8:P=10,P*C})(p),w=m<=5?m:5,A=m/w,E=Array.from({length:w+1},(k,C)=>C*A),z=k=>{const C=d-n.left-n.right;if(s.length===0)return 0;const O=C/s.length;return n.left+k*O+O/2},N=k=>250-n.bottom-k/m*(250-n.top-n.bottom),j=k=>s.map((C,O)=>`${O===0?"M":"L"} ${z(O)} ${N(C.summary.sentiment[k]??0)}`).join(" ");return t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md p-6",children:[e("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Sentiment Trend Analysis"}),t("div",{className:"flex justify-center space-x-4 text-sm mb-4",children:[t("div",{className:"flex items-center",children:[e("span",{className:"w-3 h-3 rounded-full bg-emerald-500 mr-2"}),"Positive"]}),t("div",{className:"flex items-center",children:[e("span",{className:"w-3 h-3 rounded-full bg-rose-500 mr-2"}),"Negative"]}),t("div",{className:"flex items-center",children:[e("span",{className:"w-3 h-3 rounded-full bg-slate-500 mr-2"}),"Neutral"]})]}),e("div",{className:"w-full overflow-x-auto",children:t("svg",{viewBox:`0 0 ${d} 250`,style:{minWidth:"400px",width:`${d}px`},children:[E.map(k=>t("g",{children:[e("line",{x1:n.left,y1:N(k),x2:d-n.right,y2:N(k),strokeWidth:"0.5",strokeDasharray:"3,3",className:"stroke-slate-200 dark:stroke-slate-700"}),e("text",{x:n.left-8,y:N(k)+3,textAnchor:"end",className:"text-xs fill-slate-500 dark:fill-white",children:Math.round(k*10)/10})]},k)),s.map((k,C)=>e("text",{x:z(C),y:250-n.bottom+20,textAnchor:"middle",className:"text-xs fill-slate-500 dark:fill-white",children:k.label},C)),s.length>1&&t(rt,{children:[e("path",{d:j("positive"),fill:"none",stroke:"#10b981",strokeWidth:"2"}),e("path",{d:j("negative"),fill:"none",stroke:"#f43f5e",strokeWidth:"2"}),e("path",{d:j("neutral"),fill:"none",stroke:"#64748b",strokeWidth:"2"})]}),s.map((k,C)=>t("g",{children:[e("circle",{cx:z(C),cy:N(k.summary.sentiment.positive??0),r:"3",fill:"#10b981"}),e("circle",{cx:z(C),cy:N(k.summary.sentiment.negative??0),r:"3",fill:"#f43f5e"}),e("circle",{cx:z(C),cy:N(k.summary.sentiment.neutral??0),r:"3",fill:"#64748b"})]},C))]})})]})},ys=["What are the biggest complaints?","Summarize the positive feedback in three bullet points.","Are there any comments about the price or value?","What features are mentioned most often, both good and bad?"],Qe=({question:s,onClick:o})=>e("button",{onClick:()=>o(s),className:"w-full text-left p-3 text-sm text-slate-700 dark:text-slate-200 bg-slate-100 dark:bg-slate-700/50 rounded-lg transition-colors hover:bg-purple-100 dark:hover:bg-purple-900/40 focus:outline-none focus:ring-2 focus:ring-purple-400",children:s}),ks=({onSendMessage:s,onGenerateQuestions:o,isGeneratingQuestions:n})=>{const[i,r]=v([]),[d,p]=v(null),b=async()=>{p(null);try{const m=await o();r(m)}catch{p("Sorry, I couldn't generate questions right now.")}};return t("div",{className:"p-4 h-full flex flex-col justify-center text-center",children:[e(K,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Start the conversation"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Ask anything about your data, or try one of these suggestions."}),t("div",{className:"space-y-3 text-left max-w-md mx-auto w-full",children:[i.length>0?i.map((m,w)=>e(Qe,{question:m,onClick:s},`ai-${w}`)):ys.map((m,w)=>e(Qe,{question:m,onClick:s},`template-${w}`)),t("div",{className:"pt-2",children:[t("button",{onClick:b,disabled:n,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-500 hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-purple-400",children:[n?t("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e(Ae,{className:"w-5 h-5 mr-2"}),n?"Generating...":"Suggest questions with AI"]}),d&&e("p",{className:"text-xs text-red-500 mt-2",children:d})]})]})]})},Ns=({isOpen:s,onClose:o,messages:n,onSendMessage:i,isLoading:r,title:d,onGenerateQuestions:p,isGeneratingQuestions:b})=>{const[m,w]=v(""),A=ie(null);ce(()=>{var N;(N=A.current)==null||N.scrollIntoView({behavior:"smooth"})},[n]);const z=N=>{N.preventDefault(),m.trim()&&!r&&(i(m),w(""))};return s?e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:t("div",{role:"dialog","aria-modal":"true","aria-labelledby":"chatbot-modal-title",className:"w-full max-w-2xl h-[80vh] bg-white dark:bg-slate-800 rounded-2xl shadow-2xl flex flex-col",children:[t("header",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t("div",{className:"flex items-center space-x-2 min-w-0",children:[e(K,{className:"w-6 h-6 text-purple-500 flex-shrink-0"}),e("h2",{id:"chatbot-modal-title",className:"text-lg font-semibold text-slate-800 dark:text-slate-100 truncate",children:d||"Ask About Your Data"})]}),e("button",{onClick:o,className:"p-1 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Close chat",children:e($e,{className:"w-6 h-6"})})]}),e("main",{className:"flex-1 overflow-y-auto",children:n.length===0?e(ks,{onSendMessage:i,onGenerateQuestions:p,isGeneratingQuestions:b}):t("div",{className:"p-4 space-y-4",children:[n.map(N=>e("div",{className:`flex items-end gap-2 ${N.sender==="user"?"justify-end":"justify-start"}`,children:e("div",{className:`max-w-md p-3 rounded-2xl ${N.sender==="user"?"bg-purple-500 text-white rounded-br-none":"bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100 rounded-bl-none"}`,children:e("p",{className:"text-sm whitespace-pre-wrap",children:N.text})})},N.id)),r&&e("div",{className:"flex items-end gap-2 justify-start",children:e("div",{className:"max-w-md p-3 rounded-2xl bg-slate-200 dark:bg-slate-700 rounded-bl-none",children:t("div",{className:"flex items-center justify-center space-x-1",children:[e("span",{className:"h-2 w-2 bg-slate-500 rounded-full animate-bounce [animation-delay:-0.3s]"}),e("span",{className:"h-2 w-2 bg-slate-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),e("span",{className:"h-2 w-2 bg-slate-500 rounded-full animate-bounce"})]})})}),e("div",{ref:A})]})}),e("footer",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:t("form",{onSubmit:z,className:"flex items-center space-x-2",children:[e("label",{htmlFor:"chat-input",className:"sr-only",children:"Chat message"}),e("input",{id:"chat-input",type:"text",value:m,onChange:N=>w(N.target.value),placeholder:"e.g., What are the main complaints about battery life?",className:"flex-1 block w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition sm:text-sm"}),e("button",{type:"submit",disabled:r||!m.trim(),className:"p-3 bg-purple-500 text-white rounded-lg shadow-sm hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-purple-400","aria-label":"Send message",children:e(ns,{className:"w-6 h-6"})})]})})]})}):null},ye=({icon:s,label:o,value:n,iconColor:i,allowWrap:r=!1})=>t("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg flex items-center space-x-3",children:[e("div",{className:`flex-shrink-0 p-2 rounded-full ${i}`,children:s}),t("div",{className:"min-w-0 flex-1",children:[e("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium uppercase tracking-wider truncate",title:o,children:o}),e("p",{className:`text-lg font-bold text-slate-800 dark:text-slate-100 ${r?"":"truncate"}`,title:typeof n=="string"?n:void 0,children:n})]})]}),Cs=({data:s})=>{const{positive:o,negative:n,neutral:i}=s,r=o+n+i;if(r===0)return e("div",{className:"flex items-center justify-center h-48 text-slate-500",children:"No sentiment data to display."});const d=60,p=15,b=2*Math.PI*d,m=o/r,w=n/r,A=m*b,E=w*b,z=(1-w)*b,N=(1-w-m)*b;return t("div",{className:"relative w-full aspect-square mx-auto max-w-[12rem]",children:[t("svg",{className:"absolute inset-0",viewBox:"0 0 150 150",role:"img","aria-labelledby":"donut-chart-title donut-chart-desc",children:[e("title",{id:"donut-chart-title",children:"Sentiment Distribution"}),e("desc",{id:"donut-chart-desc",children:"A donut chart showing the proportion of customer feedback. Green is positive, red is negative, and grey is neutral."}),e("circle",{cx:"75",cy:"75",r:d,fill:"none",strokeWidth:p,className:"stroke-slate-200 dark:stroke-slate-600"}),o>0&&e("circle",{cx:"75",cy:"75",r:d,fill:"none",strokeWidth:p,strokeDasharray:`${A} ${b-A}`,strokeDashoffset:N,transform:"rotate(-90 75 75)",className:"stroke-emerald-500 transition-all duration-500"}),n>0&&e("circle",{cx:"75",cy:"75",r:d,fill:"none",strokeWidth:p,strokeDasharray:`${E} ${b-E}`,strokeDashoffset:z,transform:"rotate(-90 75 75)",className:"stroke-rose-500 transition-all duration-500"})]}),t("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center","aria-hidden":"true",children:[e("p",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:r}),e("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:"Total Points"})]})]})},Ss=({data:s})=>{const o=ie(null),[n,i]=v(400);ce(()=>{const E=()=>{o.current&&i(o.current.offsetWidth)},z=new ResizeObserver(E),N=o.current;return N&&(z.observe(N),E()),()=>{N&&z.unobserve(N)}},[]);const r=[{label:"Pros",value:s.pros,color:"fill-emerald-500"},{label:"Cons",value:s.cons,color:"fill-rose-500"},{label:"Themes",value:s.themes,color:"fill-amber-500"}],d=Math.max(...r.map(E=>E.value),1),p=150,b=30,m=15,w=60,A=40;return t("div",{ref:o,children:[e("h4",{className:"font-semibold mb-2 text-center text-slate-700 dark:text-slate-300",children:"Feedback Breakdown"}),t("svg",{viewBox:`0 0 ${n} ${p}`,className:"w-full",role:"img","aria-labelledby":"breakdown-chart-title breakdown-chart-desc",children:[e("title",{id:"breakdown-chart-title",children:"Feedback Breakdown by Category"}),t("desc",{id:"breakdown-chart-desc",children:["A horizontal bar chart showing the total count of pros (",s.pros,"), cons (",s.cons,"), and common themes (",s.themes,")."]}),r.map((E,z)=>{const N=z*(b+m),j=Math.max(0,n-w-A),k=E.value>0?E.value/d*j:0,C=k>35,O=C?w+k-5:w+k+5,P=C?"end":"start",Q=C?"fill-white":"fill-slate-800 dark:fill-slate-100";return t("g",{transform:`translate(0, ${N})`,children:[e("text",{x:w-5,y:b/2,dominantBaseline:"middle",textAnchor:"end",className:"text-sm font-medium fill-slate-600 dark:fill-slate-300",children:E.label}),e("rect",{x:w,y:"0",width:k,height:b,rx:"4",className:E.color}),e("text",{x:O,y:b/2,dominantBaseline:"middle",textAnchor:P,className:`text-sm font-bold transition-all ${Q}`,children:E.value})]},E.label)})]})]})},As=({summary:s,isCompact:o=!1})=>{var w;const{positive:n,negative:i}=s.sentiment,r=n+i+s.sentiment.neutral,d=r>0?Math.round(n/r*100):0,p=r>0?Math.round(i/r*100):0,b=((w=s.themes)==null?void 0:w[0])||"N/A",m={pros:s.pros.length,cons:s.cons.length,themes:s.themes.length};return t("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md p-6 space-y-6",children:[e("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Analytics Dashboard"}),t("div",{className:`grid grid-cols-1 ${o?"":"md:grid-cols-3"} gap-4`,children:[e(ye,{icon:e(ls,{className:"w-5 h-5 text-emerald-800 dark:text-emerald-200"}),label:"Positive Sentiment",value:`${d}%`,iconColor:"bg-emerald-200 dark:bg-emerald-500/30"}),e(ye,{icon:e(os,{className:"w-5 h-5 text-rose-800 dark:text-rose-200"}),label:"Negative Sentiment",value:`${p}%`,iconColor:"bg-rose-200 dark:bg-rose-500/30"}),e(ye,{icon:e(is,{className:"w-5 h-5 text-sky-800 dark:text-sky-200"}),label:"Top Theme",value:b,iconColor:"bg-sky-200 dark:bg-sky-500/30",allowWrap:!0})]}),t("div",{className:`grid grid-cols-1 ${o?"":"lg:grid-cols-2"} gap-6 items-center pt-6 border-t border-slate-200 dark:border-slate-700`,children:[e("div",{children:e(Cs,{data:s.sentiment})}),e("div",{children:e(Ss,{data:m})})]})]})},Ts=({analysis:s,icon:o,iconBgColor:n,iconTextColor:i})=>s?e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg overflow-hidden border border-purple-200 dark:border-purple-800",children:t("div",{className:"p-6",children:[t("div",{className:"flex items-center",children:[e("div",{className:`flex-shrink-0 p-3 rounded-full ${n}`,children:e("div",{className:`h-6 w-6 ${i}`,children:o})}),e("h3",{className:"ml-4 text-xl font-semibold text-slate-800 dark:text-slate-100",children:"AI Strategic Analysis"})]}),t("div",{className:"mt-5 space-y-6",children:[t("div",{children:[e("h4",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Overview"}),e("p",{className:"mt-1 text-slate-700 dark:text-slate-300",children:s.overview})]}),t("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/40 rounded-lg",children:[e("h4",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Key Focus Area"}),e("p",{className:"mt-1 text-lg font-semibold text-purple-500 dark:text-purple-400",children:s.keyFocusArea})]}),t("div",{children:[e("h4",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2",children:"Recommended Next Steps"}),e("div",{className:"space-y-4",children:s.steps.map((r,d)=>t("div",{className:"border-l-4 border-purple-500 pl-4 py-2",children:[t("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:[d+1,". ",r.step]}),t("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:[e("span",{className:"font-semibold",children:"Rationale: "}),r.rationale]})]},d))})]})]})]})}):null,ke=({icon:s,title:o,children:n})=>t("div",{className:"bg-slate-100 dark:bg-slate-700/50 p-5 rounded-xl",children:[t("div",{className:"flex items-center mb-3",children:[e("div",{className:"flex-shrink-0 h-8 w-8 text-purple-500 dark:text-purple-400 p-1 bg-white dark:bg-slate-800 rounded-lg shadow",children:s}),e("h3",{className:"ml-4 text-lg font-semibold text-slate-800 dark:text-slate-100",children:o})]}),e("div",{className:"space-y-4 text-slate-600 dark:text-slate-300 text-sm pl-1",children:n})]}),J=({number:s,title:o,children:n})=>t("div",{className:"flex items-start",children:[e("div",{className:"flex-shrink-0 flex items-center justify-center w-7 h-7 bg-purple-500 text-white font-bold rounded-full mr-4 mt-1",children:s}),t("div",{className:"flex-1",children:[e("h4",{className:"font-semibold text-slate-800 dark:text-slate-100",children:o}),e("div",{className:"mt-1 text-slate-600 dark:text-slate-300 space-y-2",children:n})]})]}),oe=({children:s})=>t("div",{className:"flex items-start",children:[e(de,{className:"flex-shrink-0 w-5 h-5 text-emerald-500 mr-3 mt-0.5"}),e("p",{children:s})]}),Ne=({children:s})=>e("code",{className:"px-1.5 py-0.5 text-xs font-mono bg-slate-200 dark:bg-slate-600 text-purple-600 dark:text-purple-300 rounded",children:s}),Is=({isOpen:s,onClose:o})=>s?e("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",onClick:o,children:t("div",{role:"dialog","aria-modal":"true","aria-labelledby":"help-modal-title",className:"w-full max-w-3xl max-h-[90vh] bg-white dark:bg-slate-800 rounded-2xl shadow-2xl flex flex-col overflow-hidden",onClick:n=>n.stopPropagation(),children:[t("header",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:[t("div",{className:"flex items-center space-x-2",children:[e(K,{className:"w-6 h-6 text-purple-500"}),e("h2",{id:"help-modal-title",className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"How to Use Customer Insights AI"})]}),e("button",{onClick:o,className:"p-1 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Close help modal",children:e($e,{className:"w-6 h-6"})})]}),t("main",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50 dark:bg-slate-900/50",children:[e(ke,{icon:e(ct,{className:"w-full h-full"}),title:"What is this app?",children:e("p",{children:"Customer Insights AI is a powerful tool designed to help customer service teams quickly understand large volumes of customer feedback. It uses generative AI to analyze raw review data and transform it into an easy-to-digest summary, highlighting key trends, sentiments, and actionable insights."})}),e(ke,{icon:e(Te,{className:"w-full h-full"}),title:"How to Use It: A Step-by-Step Guide",children:t("div",{className:"space-y-6",children:[t(J,{number:1,title:"Provide Your Data",children:[e("p",{children:"You have several options for inputting customer feedback:"}),t("div",{className:"space-y-3 pl-2",children:[t("div",{className:"flex items-start",children:[e(hs,{className:"w-5 h-5 mr-3 text-purple-500 flex-shrink-0 mt-0.5"}),t("div",{children:[e("strong",{className:"font-semibold",children:"Paste Text:"}),e("span",{className:"ml-1.5",children:"Directly paste raw text."})]})]}),t("div",{className:"flex items-start",children:[e(us,{className:"w-5 h-5 mr-3 text-purple-500 flex-shrink-0 mt-0.5"}),t("div",{children:[e("strong",{className:"font-semibold",children:"Upload File(s):"}),t("span",{className:"ml-1.5",children:["Upload up to 5 files (",e(Ne,{children:"CSV"}),", ",e(Ne,{children:"TXT"}),", ",e(Ne,{children:"XLSX"}),"). For Persona Analysis, a single structured CSV is required."]})]})]}),t("div",{className:"flex items-start",children:[e(ps,{className:"w-5 h-5 mr-3 text-purple-500 flex-shrink-0 mt-0.5"}),t("div",{children:[e("strong",{className:"font-semibold",children:"Google Sheet:"}),e("span",{className:"ml-1.5",children:"Paste a public Google Sheet URL."})]})]}),t("div",{className:"flex items-start",children:[e(bs,{className:"w-5 h-5 mr-3 text-purple-500 flex-shrink-0 mt-0.5"}),t("div",{children:[e("strong",{className:"font-semibold",children:"YouTube Comments:"}),e("span",{className:"ml-1.5",children:'Export comments using a third-party tool, then use the "Paste Text" or "Upload File(s)" tabs to analyze them.'})]})]})]})]}),t(J,{number:2,title:"Configure Your Analysis",children:[t("p",{children:["Set the ",e("strong",{className:"font-semibold",children:"Analysis Language"})," for the output report. For advanced analysis, you can also specify a ",e("strong",{className:"font-semibold",children:"Persona/Segment Column Name"}),"."]}),e("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg text-sm",children:t("p",{children:[e("strong",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"Persona Analysis Tip:"})," To compare feedback across different customer types (e.g., 'New User' vs 'Power User'), ensure your data is a single CSV with a dedicated column for the persona. Then, enter that column's exact name into the optional input field."]})})]}),e(J,{number:3,title:"Generate Insights",children:t("p",{children:["Click the ",e("span",{className:"font-semibold text-purple-500 dark:text-purple-400",children:"Analyze"})," button. The AI will process all the data you've provided."]})}),t(J,{number:4,title:"Interpret the Results",children:[e("p",{children:"The analysis is broken down into several cards for easy digestion:"}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pt-2",children:[t("div",{className:"flex items-center",children:[e(dt,{className:"w-5 h-5 mr-2 text-purple-500"})," Persona Comparison"]}),t("div",{className:"flex items-center",children:[e(Te,{className:"w-5 h-5 mr-2 text-purple-500"})," AI Strategic Analysis"]}),t("div",{className:"flex items-center",children:[e(gs,{className:"w-5 h-5 mr-2 text-purple-500"})," Analytics Dashboard"]}),t("div",{className:"flex items-center",children:[e(ot,{className:"w-5 h-5 mr-2 text-purple-500"})," Actionable Insights"]})]})]}),t(J,{number:5,title:"Interact Further",children:[e("p",{children:"Use the app's interactive features to dig deeper:"}),t("div",{className:"space-y-3 pl-2",children:[t("div",{className:"flex items-start",children:[e(lt,{className:"w-5 h-5 mr-3 text-purple-500 flex-shrink-0 mt-0.5"}),t("div",{children:[e("strong",{className:"font-semibold",children:"Draft Reply:"}),e("span",{className:"ml-1.5",children:'Get an AI-generated response for any specific "Con".'})]})]}),t("div",{className:"flex items-start",children:[e(it,{className:"w-5 h-5 mr-3 text-purple-500 flex-shrink-0 mt-0.5"}),t("div",{children:[e("strong",{className:"font-semibold",children:"Ask AI:"}),e("span",{className:"ml-1.5",children:"Open the chatbot to ask questions about your data."})]})]})]})]})]})}),e(ke,{icon:e(me,{className:"w-full h-full"}),title:"Tips for Best Results",children:t("div",{className:"space-y-3",children:[t(oe,{children:[e("strong",{children:"Quality In, Quality Out:"})," The cleaner and more relevant your input data, the better the analysis will be."]}),t(oe,{children:[e("strong",{children:"Use Structured Data for Personas:"})," For the best Persona Analysis, use a clean CSV file with consistent naming in your segment column."]}),t(oe,{children:[e("strong",{children:"Context is Key:"})," The more context you provide about your product, the smarter the AI's suggestions and replies will be."]}),t(oe,{children:[e("strong",{children:"Export and Share:"}),' Use the "Export Report" button to generate a PDF, DOCX, or TXT file of the analysis for sharing.']})]})})]})]})}):null,Es=({keywords:s,onKeywordClick:o})=>!s||s.length===0?e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:t("div",{className:"p-6",children:[e("div",{className:"flex items-center",children:e("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Top Keywords"})}),e("p",{className:"mt-4 text-sm text-slate-500 italic",children:"No specific keywords were extracted."})]})}):e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md overflow-hidden",children:t("div",{className:"p-6",children:[e("div",{className:"flex items-center",children:e("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Top Keywords"})}),e("div",{className:"mt-4 flex flex-wrap gap-2",children:s.map(n=>t("button",{onClick:()=>o(n.keyword),className:"flex items-center bg-slate-100 dark:bg-slate-700 rounded-full px-3 py-1 text-sm font-medium text-slate-700 dark:text-slate-200 transition-colors hover:bg-purple-100 dark:hover:bg-purple-800/60 focus:outline-none focus:ring-2 focus:ring-purple-400",title:`Analyze mentions of "${n.keyword}"`,children:[e("span",{children:n.keyword}),e("span",{className:"ml-2 text-xs font-semibold bg-white dark:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-full px-2 py-0.5",children:n.frequency})]},n.keyword))})]})}),Ce=({title:s,items:o,icon:n,bgColor:i,textColor:r})=>t("div",{className:`p-4 rounded-lg ${i}`,children:[t("div",{className:"flex items-center mb-3",children:[e("div",{className:`flex-shrink-0 w-7 h-7 ${r}`,children:n}),e("h4",{className:`ml-2 text-md font-semibold ${r}`,children:s})]}),o.length>0?e("ul",{className:"space-y-1 text-sm list-disc list-inside",children:o.map((d,p)=>e("li",{children:d},p))}):e("p",{className:"text-sm italic",children:"None identified."})]}),Rs=({analysis:s,trendChartData:o,startReportLabel:n,endReportLabel:i,onClose:r})=>e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-purple-200 dark:border-purple-800",children:t("div",{className:"p-6",children:[t("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6",children:[t("div",{className:"flex items-center",children:[e("div",{className:"flex-shrink-0 p-3 rounded-full bg-purple-100 dark:bg-purple-900/50",children:e("div",{className:"h-6 w-6 text-purple-500 dark:text-purple-400",children:e(fs,{})})}),t("div",{className:"ml-4",children:[e("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"AI Trend Analysis Report"}),t("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate",children:["Comparing '",n,"' vs. '",i,"'"]})]})]}),e("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 rounded-md hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:"Back to Reports"})]}),t("div",{className:"space-y-8",children:[t("div",{children:[e("h4",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Narrative Summary"}),e("p",{className:"mt-2 p-4 text-slate-700 dark:text-slate-200 bg-slate-50 dark:bg-slate-700/40 rounded-lg border border-slate-200 dark:border-slate-700",children:s.summary})]}),e(mt,{data:o}),t("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e(Ce,{title:"New Issues",items:s.newIssues,icon:e(Re,{}),bgColor:"bg-rose-50 dark:bg-rose-900/30 text-rose-800 dark:text-rose-200",textColor:"text-rose-600 dark:text-rose-400"}),e(Ce,{title:"Resolved Issues",items:s.resolvedIssues,icon:e(Ee,{}),bgColor:"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-200",textColor:"text-emerald-600 dark:text-emerald-400"}),e(Ce,{title:"Persistent Themes",items:s.persistentThemes,icon:e(me,{}),bgColor:"bg-amber-50 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200",textColor:"text-amber-600 dark:text-amber-400"})]})]})]})}),Ze=({icon:s,value:o,color:n})=>t("div",{className:"flex items-center space-x-2",children:[e("div",{className:`flex-shrink-0 w-6 h-6 p-1 rounded-full ${n}`,children:s}),e("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:o})]}),$s=({isOpen:s,onClose:o,topic:n,analysis:i,isLoading:r})=>s?e("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",onClick:o,children:t("div",{role:"dialog","aria-modal":"true","aria-labelledby":"deep-dive-modal-title",className:"w-full max-w-2xl h-[85vh] bg-white dark:bg-slate-800 rounded-2xl shadow-2xl flex flex-col overflow-hidden",onClick:d=>d.stopPropagation(),children:[t("header",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:[t("div",{className:"flex items-center space-x-3 min-w-0",children:[e(xs,{className:"w-6 h-6 text-purple-500 flex-shrink-0"}),t("div",{children:[e("h2",{id:"deep-dive-modal-title",className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Deep Dive Analysis"}),e("p",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 truncate",title:n||"",children:n})]})]}),e("button",{onClick:o,className:"p-1 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Close deep dive modal",children:e($e,{className:"w-6 h-6"})})]}),t("main",{className:"flex-1 overflow-y-auto p-6",children:[r&&t("div",{className:"flex flex-col items-center justify-center h-full",children:[t("svg",{className:"animate-spin h-10 w-10 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t("p",{className:"mt-4 text-lg font-semibold text-slate-700 dark:text-slate-300",children:['Analyzing "',n,'"...']}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Searching for relevant feedback."})]}),!r&&i&&t("div",{className:"space-y-6",children:[t("div",{children:[e("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-2",children:"AI Summary"}),e("p",{className:"p-4 bg-slate-50 dark:bg-slate-700/40 rounded-lg text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700",children:i.summary})]}),t("div",{className:"flex items-center justify-around p-3 bg-slate-100 dark:bg-slate-700/40 rounded-lg",children:[e(Ze,{icon:e(Ee,{}),value:i.sentiment.positive,color:"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-600 dark:text-emerald-300"}),e(Ze,{icon:e(Re,{}),value:i.sentiment.negative,color:"bg-rose-100 dark:bg-rose-900/50 text-rose-600 dark:text-rose-300"}),t("div",{className:"flex items-center space-x-2",children:[e("div",{className:"flex-shrink-0 w-6 h-6 p-1 rounded-full bg-slate-200 dark:bg-slate-600 text-slate-500 dark:text-slate-300",children:e("svg",{viewBox:"0 0 16 16",fill:"currentColor",children:e("path",{d:"M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"})})}),e("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:i.sentiment.neutral})]})]}),t("div",{children:[t("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 mb-2",children:["Relevant Snippets (",i.snippets.length,")"]}),i.snippets.length>0?e("div",{className:"space-y-3",children:i.snippets.map((d,p)=>e("blockquote",{className:"p-3 border-l-4 border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700/40 rounded-r-lg",children:t("p",{className:"text-sm text-slate-700 dark:text-slate-300 italic",children:['"',d,'"']})},p))}):e("p",{className:"text-sm text-slate-500 italic",children:"No specific snippets found for this topic."})]})]}),!r&&!i&&t("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e("p",{className:"text-lg font-semibold text-rose-600 dark:text-rose-400",children:"Analysis Failed"}),t("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:['Could not retrieve details for "',n,'". Please try again.']})]})]})]})}):null,Ds=({comparison:s})=>e("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-purple-200 dark:border-purple-800",children:t("div",{className:"p-6",children:[t("div",{className:"flex items-center mb-6",children:[e("div",{className:"flex-shrink-0 p-3 rounded-full bg-purple-100 dark:bg-purple-900/50",children:e("div",{className:"h-6 w-6 text-purple-500 dark:text-purple-400",children:e(dt,{})})}),t("div",{className:"ml-4",children:[e("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Persona Comparison Overview"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Key differences in feedback across customer segments."})]})]}),t("div",{className:"space-y-8",children:[t("div",{children:[e("h4",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"AI Overview"}),e("p",{className:"mt-2 p-4 text-slate-700 dark:text-slate-200 bg-slate-50 dark:bg-slate-700/40 rounded-lg border border-slate-200 dark:border-slate-700",children:s.overview})]}),t("div",{children:[e("h4",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-3",children:"Key Differentiators by Segment"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.segmentComparisons.map((o,n)=>t("div",{className:"bg-slate-50 dark:bg-slate-700/40 p-4 rounded-lg",children:[e("h5",{className:"font-semibold text-purple-500 dark:text-purple-400",children:o.segment}),o.keyDifferentiators.length>0?e("ul",{className:"mt-2 space-y-2 text-sm text-slate-600 dark:text-slate-300",children:o.keyDifferentiators.map((i,r)=>t("li",{className:"flex items-start",children:[e(me,{className:"flex-shrink-0 w-4 h-4 text-amber-500 mr-2.5 mt-0.5"}),e("span",{children:i})]},r))}):e("p",{className:"mt-2 text-sm italic text-slate-500",children:"No strong differentiators identified."})]},n))})]})]})]})}),zs=({isOpen:s,onSave:o})=>{const[n,i]=v(""),r=()=>{n.trim()&&o(n.trim())};return s?e("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:t("div",{role:"dialog","aria-modal":"true","aria-labelledby":"api-key-modal-title",className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-2xl shadow-2xl flex flex-col",children:[e("header",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:t("div",{className:"flex items-center space-x-2",children:[e(K,{className:"w-6 h-6 text-purple-500"}),e("h2",{id:"api-key-modal-title",className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Enter Your API Key"})]})}),t("main",{className:"p-6 space-y-4",children:[e("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"An AI-powered action requires a Google AI Studio API key to proceed. Your key is saved securely in your browser's local storage and is not shared."}),t("div",{children:[e("label",{htmlFor:"api-key-input",className:"sr-only",children:"Google AI Studio API Key"}),e("input",{id:"api-key-input",type:"password",value:n,onChange:d=>i(d.target.value),placeholder:"Enter your API key here",className:"flex-1 block w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition sm:text-sm"}),e("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-xs text-purple-500 dark:text-purple-400 hover:underline",children:"Get your API key from Google AI Studio"})]})]}),e("footer",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 rounded-b-2xl",children:e("button",{onClick:r,disabled:!n.trim(),className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-500 hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-purple-400",children:"Save and Continue"})})]})}):null},X=5,Ie=5,U=5e5,Ms=Ie*1024*1024,et="Comment",tt="gemini-api-key",Se=()=>{const s=new Date,o=String(s.getDate()).padStart(2,"0"),n=String(s.getMonth()+1).padStart(2,"0"),i=s.getFullYear();return`${o}-${n}-${i}`},st=s=>{const o=[];let n="",i=!1;for(let r=0;r<s.length;r++){const d=s[r];d==='"'?i=!i:d===","&&!i?(o.push(n.trim()),n=""):n+=d}return o.push(n.trim()),o},Os=()=>{var Je;const[s,o]=v(null),[n,i]=v(!1),[r,d]=v([]),[p,b]=v(""),[m,w]=v(null),[A,E]=v(null),[z,N]=v(null),[j,k]=v(null),[C,O]=v(0),[P,Q]=v(!1),[De,ze]=v(!1),[he,Me]=v(!1),[Oe,R]=v(null),[ue,Z]=v("paste"),[ee,ut]=v(""),[te,se]=v({loading:!1,error:null}),[pt,pe]=v(!1),[gt,q]=v("idle"),[re,Pe]=v(!1),[B,ft]=v("Auto-detect"),[W,ge]=v(""),[Le,Be]=v(!1),[xt,He]=v(!1),[bt,Fe]=v(!1),[wt,ae]=v([]),[vt,Ge]=v(!1),[je,ne]=v(!1),[H,le]=v([]),[yt,Ve]=v(!1),[kt,Nt]=v(null),[Ct,fe]=v(null),[St,Ye]=v(!1),[At,Ue]=v(!1),qe=ie(null);ce(()=>{const c=localStorage.getItem(tt);c&&o(c)},[]);const Tt=c=>{o(c),localStorage.setItem(tt,c),i(!1)},It=G(async()=>{var c,a;if(!s){i(!0);return}if(r.length===0||r.every(l=>!l.content.trim())){R("Please provide some review data before summarizing.");return}Q(!0),R(null),w(null),E(null),N(null),k(null),ae([]),O(0),ne(!1),le([]);try{let l=r;if(W.trim()){const x=r[0];if(!x)throw new Error("No data source available for persona analysis.");const u=x.content.trim().split(`
`),g=u.shift();if(!g)throw new Error("CSV data is empty or missing a header.");const S=st(g),$=S.findIndex(D=>D.trim()===W.trim()),T=S.findIndex(D=>D.trim()===et);if($===-1)throw new Error(`Segment column "${W}" not found in the data header.`);if(T===-1)throw new Error(`Review column "${et}" not found in the data header.`);const y=new Map;for(const D of u){const I=st(D),L=(c=I[$])==null?void 0:c.trim(),F=(a=I[T])==null?void 0:a.trim();L&&F&&(y.has(L)||y.set(L,[]),y.get(L).push(F))}if(y.size===0)throw new Error("No personas or reviews could be extracted. Check your column name and data format.");l=Array.from(y.entries()).map(([D,I])=>({label:D,content:I.join(`
`),reportDate:x.reportDate})),d(l)}const h=await Promise.all(l.map(x=>_t(s,x.content,B,p)));if(w(h),h.length>0){const x=await Promise.all(h.map(u=>Xt(s,u,B)));E(x)}if(W.trim()&&h.length>1){const x=l.map((g,S)=>({segment:g.label,summary:h[S]})),u=await ss(s,x,B);k(u)}}catch(l){R(l.message||"An unexpected error occurred.")}finally{Q(!1)}},[s,r,B,W,p]),Et=G(async()=>{if(!s){i(!0);return}Me(!0),R(null);try{const c=await Zt(s);b("AcoustiMax Pro Headphones: Wireless, noise-cancelling, 20-hour battery life."),d([{label:"Sample Headphones Data",content:c.trim(),reportDate:"Q4 2024"}]),Z("paste"),ge("Customer Type")}catch(c){R(c.message||"Failed to generate sample data.")}finally{Me(!1)}},[s]),We=c=>{if(!c||c.length===0)return;if(R(null),q("processing"),c.length>X){R(`You can upload a maximum of ${X} files at a time.`),q("idle");return}const a=Array.from(c).filter(h=>h.size>Ms);if(a.length>0){R(`The following files are too large (max ${Ie}MB): ${a.map(h=>h.name).join(", ")}`),q("idle");return}const l=Array.from(c).map(h=>new Promise((x,u)=>{const g=new FileReader;g.onload=S=>{var $;try{const T=($=S.target)==null?void 0:$.result;if(!T)throw new Error("File is empty or could not be read.");let y="";if(h.name.endsWith(".csv")||h.name.endsWith(".txt"))y=T;else if(h.name.endsWith(".xlsx")||h.name.endsWith(".xls")){const D=window.XLSX;if(!D)throw new Error("XLSX library not found. Could not parse Excel file.");const I=D.read(T,{type:"array"}),L=I.SheetNames[0],F=I.Sheets[L];y=D.utils.sheet_to_csv(F)}else{u(new Error(`Unsupported file type: ${h.name}. Please use CSV, XLSX, or TXT.`));return}x({label:h.name,content:y,reportDate:""})}catch(T){u(T)}},g.onerror=()=>u(new Error(`Error reading ${h.name}.`)),h.name.endsWith(".csv")||h.name.endsWith(".txt")?g.readAsText(h):h.name.endsWith(".xlsx")||h.name.endsWith(".xls")?g.readAsArrayBuffer(h):R(`Unsupported file type: ${h.name}. Please use CSV, XLSX, or TXT.`)}));Promise.all(l).then(h=>{d(h),q("success"),setTimeout(()=>{Z("paste"),q("idle")},1500)}).catch(h=>{R(h.message||"An error occurred while processing files."),q("idle")})},Rt=G(async()=>{if(!ee.trim()){se({loading:!1,error:"Please enter a Google Sheet URL."});return}se({loading:!0,error:null}),R(null);try{const c=/spreadsheets\/d\/([a-zA-Z0-9-_]+)/,a=ee.match(c);if(!a||!a[1])throw new Error("Invalid Google Sheet URL format.");const h=`https://docs.google.com/spreadsheets/d/${a[1]}/export?format=csv`,x=await fetch(h);if(!x.ok)throw new Error("Fetch failed. Ensure the sheet is published to the web.");const u=await x.text();if(u.length>U)throw new Error(`Sheet data is too large. The limit is ${U.toLocaleString()} characters.`);d([{label:"Google Sheet",content:u,reportDate:""}]),se({loading:!1,error:null}),Z("paste")}catch(c){se({loading:!1,error:c.message||"An unexpected error occurred."})}},[ee]),_e=()=>{const a=encodeURI(`data:text/csv;charset=utf-8,Reviewer Name,Rating (1-5),Customer Type,Comment
John Doe,5,Power User,"I absolutely love these headphones! The noise cancelling is top-tier."
Jane Smith,2,New User,"Disappointed with the battery life. The setup was also confusing."
`),l=document.createElement("a");l.setAttribute("href",a),l.setAttribute("download","review_template_with_persona.csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l)},$t=G(c=>{if(!m||m.length===0)return;const a=m[c],l=(u,g)=>!g||g.length===0?"":`**${u}:**
${g.map(S=>`- ${S}`).join(`
`)}

`,h=u=>!u||u.length===0?"":`**Top Keywords:**
${u.map(g=>`- ${g.keyword} (${g.frequency} mentions)`).join(`
`)}

`,x=`**Customer Review Summary for ${r[c].label}**

`+l("Pros",a.pros)+l("Cons",a.cons)+l("Common Themes",a.themes)+h(a.keywords);navigator.clipboard.writeText(x.trim()).then(()=>{Pe(!0),setTimeout(()=>Pe(!1),2500)})},[m,r]),_=G(c=>{if(!m||!A)return null;const a=m[c],l=A[c];return{title:`CUSTOMER INSIGHTS AI - ANALYSIS REPORT for ${r[c].label}`,date:new Date().toLocaleString(),strategicAnalysis:l,sentiment:a.sentiment,pros:a.pros,cons:a.cons,themes:a.themes,insights:a.insights,keywords:a.keywords}},[m,A,r]),Dt=G(c=>{var S,$;const a=_(c);if(!a)return;let l=`${a.title}
`;l+=`=========================================
`,l+=`Date: ${a.date}

`,l+=`--- STRATEGIC ANALYSIS ---
`,l+=`Overview: ${a.strategicAnalysis.overview}
`,l+=`Key Focus Area: ${a.strategicAnalysis.keyFocusArea}

`,a.strategicAnalysis.steps.forEach((T,y)=>{l+=`Strategic Step ${y+1}: ${T.step}
`,l+=`Rationale: ${T.rationale}

`}),l+=`--- SENTIMENT BREAKDOWN ---
`,l+=`Positive: ${a.sentiment.positive}
`,l+=`Negative: ${a.sentiment.negative}
`,l+=`Neutral: ${a.sentiment.neutral}

`;const h=(T,y)=>{let D=`--- ${T.toUpperCase()} ---
`;return D+=((y==null?void 0:y.length)>0?y.map(I=>`- ${I}`).join(`
`):"No items found.")+`

`,D};l+=h("Pros",a.pros),l+=h("Cons",a.cons),l+=h("Common Themes",a.themes),l+=`--- TOP KEYWORDS ---
`,((S=a.keywords)==null?void 0:S.length)>0?(a.keywords.forEach(T=>{l+=`- ${T.keyword} (${T.frequency} mentions)
`}),l+=`
`):l+=`No keywords extracted.

`,l+=`--- ACTIONABLE INSIGHTS (ROOT CAUSE ANALYSIS) ---
`,(($=a.insights)==null?void 0:$.length)>0?a.insights.forEach(T=>{l+=`Cause: ${T.cause}
`,l+=`Suggestion: ${T.suggestion}

`}):l+=`No specific insights generated.
`;const x=new Blob([l],{type:"text/plain;charset=utf-8"}),u=URL.createObjectURL(x),g=document.createElement("a");g.setAttribute("href",u),g.setAttribute("download",`Customer_Insights_Report_${Se()}.txt`),document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(u)},[_]),zt=G(c=>{var L,F;const a=_(c);if(!a)return;const l=window.jspdf;if(!l){R("PDF generation library (jsPDF) not found.");return}const{jsPDF:h}=l,x=new h,u=15,S=x.internal.pageSize.getWidth()-u*2;let $=u;const T=M=>{$+M>x.internal.pageSize.getHeight()-u&&(x.addPage(),$=u)},y=(M,Y,Ut=!1,qt=7)=>{x.setFontSize(Y),x.setFont(void 0,Ut?"bold":"normal");const be=x.splitTextToSize(M,S);T(be.length*(Y/2)),x.text(be,u,$),$+=be.length*(Y/2)+qt},D=M=>{M.forEach(Y=>y(`- ${Y}`,10,!1,3)),$+=5};y(a.title,18,!0,5),y(`Date: ${a.date}`,8,!1,10),y("STRATEGIC ANALYSIS",14,!0,4),y(`Overview: ${a.strategicAnalysis.overview}`,10),y(`Key Focus Area: ${a.strategicAnalysis.keyFocusArea}`,10),a.strategicAnalysis.steps.forEach((M,Y)=>{y(`Step ${Y+1}: ${M.step}`,10,!0,2),y(`Rationale: ${M.rationale}`,10)}),y("SENTIMENT BREAKDOWN",14,!0,4),y(`Positive: ${a.sentiment.positive}, Negative: ${a.sentiment.negative}, Neutral: ${a.sentiment.neutral}`,10),[{title:"PROS",items:a.pros},{title:"CONS",items:a.cons},{title:"COMMON THEMES",items:a.themes}].forEach(M=>{y(M.title,14,!0,4),M.items.length>0?D(M.items):y("No items found.",10,!1,7)}),y("TOP KEYWORDS",14,!0,4),((L=a.keywords)==null?void 0:L.length)>0?D(a.keywords.map(M=>`${M.keyword} (${M.frequency} mentions)`)):y("No keywords extracted.",10),y("ACTIONABLE INSIGHTS",14,!0,4),((F=a.insights)==null?void 0:F.length)>0?a.insights.forEach(M=>{y(`Cause: ${M.cause}`,10,!0,2),y(`Suggestion: ${M.suggestion}`,10)}):y("No specific insights generated.",10),x.save(`Customer_Insights_Report_${Se()}.pdf`)},[_]),Mt=G(c=>{var y,D;const a=_(c);if(!a)return;const l=window.docx;if(!l){R("DOCX generation library (docx) not found.");return}const{Document:h,Packer:x,Paragraph:u,TextRun:g,HeadingLevel:S}=l,$=I=>!I||I.length===0?[new u({text:"No items found."})]:I.map(L=>new u({text:L,bullet:{level:0}})),T=new h({sections:[{children:[new u({text:a.title,heading:S.HEADING_1}),new u({text:`Date: ${a.date}`,style:"IntenseQuote"}),new u({text:"STRATEGIC ANALYSIS",heading:S.HEADING_2}),new u({children:[new g({text:"Overview: ",bold:!0}),new g(a.strategicAnalysis.overview)]}),new u({children:[new g({text:"Key Focus Area: ",bold:!0}),new g(a.strategicAnalysis.keyFocusArea)]}),...a.strategicAnalysis.steps.flatMap((I,L)=>[new u({children:[new g({text:`Step ${L+1}: `,bold:!0}),new g(I.step)]}),new u({children:[new g({text:"Rationale: ",italics:!0}),new g(I.rationale)]})]),new u({text:""}),new u({text:"SENTIMENT BREAKDOWN",heading:S.HEADING_2}),new u(`Positive: ${a.sentiment.positive}, Negative: ${a.sentiment.negative}, Neutral: ${a.sentiment.neutral}`),new u({text:""}),new u({text:"PROS",heading:S.HEADING_2}),...$(a.pros),new u({text:""}),new u({text:"CONS",heading:S.HEADING_2}),...$(a.cons),new u({text:""}),new u({text:"COMMON THEMES",heading:S.HEADING_2}),...$(a.themes),new u({text:""}),new u({text:"TOP KEYWORDS",heading:S.HEADING_2}),...$((y=a.keywords)==null?void 0:y.map(I=>`${I.keyword} (${I.frequency} mentions)`)),new u({text:""}),new u({text:"ACTIONABLE INSIGHTS",heading:S.HEADING_2}),...((D=a.insights)==null?void 0:D.length)>0?a.insights.flatMap(I=>[new u({children:[new g({text:"Cause: ",bold:!0}),new g(I.cause)]}),new u({children:[new g({text:"Suggestion: ",bold:!0}),new g(I.suggestion)]})]):[new u("No specific insights generated.")]]}]});x.toBlob(T).then(I=>{const L=URL.createObjectURL(I),F=document.createElement("a");F.href=L,F.download=`Customer_Insights_Report_${Se()}.docx`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(L)})},[_]),Ot=G(async c=>{if(!m||!s)return;const a={id:Date.now(),sender:"user",text:c};ae(l=>[...l,a]),Ge(!0);try{const l=r[C].content,h=await Jt(s,l,c,B,p),x={id:Date.now()+1,sender:"ai",text:h};ae(u=>[...u,x])}catch(l){const h={id:Date.now()+1,sender:"ai",text:`Sorry, I encountered an error: ${l.message}`};ae(x=>[...x,h])}finally{Ge(!1)}},[s,r,B,C,m,p]),Pt=G(async()=>{if(!m||!s)return[];Ue(!0);try{const c=r[C].content;return await Qt(s,c,p)}catch(c){throw console.error("Failed to generate suggested questions:",c),c}finally{Ue(!1)}},[s,m,C,r,p]),Lt=c=>{le(a=>a.includes(c)?a.filter(l=>l!==c):a.length<2?[...a,c]:a)},Bt=G(async()=>{var c,a;if(!s){i(!0);return}if(H.length!==2||!m){R("Please select exactly two reports to analyze trends.");return}ze(!0),R(null),N(null);try{const[l,h]=H.sort((T,y)=>T-y),x=m[l],u=m[h],g=((c=r[l])==null?void 0:c.label)||`Report ${l+1}`,S=((a=r[h])==null?void 0:a.label)||`Report ${h+1}`,$=await es(s,x,u,g,S,B);N($),ne(!1)}catch(l){R(l.message||"An unexpected error occurred during trend analysis.")}finally{ze(!1)}},[s,H,m,r,B]),Ht=G(async()=>{if(!s){i(!0);return}if(r.length!==1){R("Column suggestion requires exactly one CSV data source.");return}Be(!0),R(null);try{const a=r[0].content.split(`
`)[0].trim();if(!a)throw new Error("Could not find a header row in the data source.");const l=await rs(s,a);l?ge(l):R("AI could not confidently suggest a segment column from the header.")}catch(c){R(c.message||"Failed to suggest a column.")}finally{Be(!1)}},[s,r]),xe=(c,a,l)=>{const h=[...r],x={...h[c]};a==="content"&&l.length>U?(R(`Each source cannot exceed ${U.toLocaleString()} characters.`),x.content=l.substring(0,U)):x[a]=l,h[c]=x,d(h)},Xe=()=>{if(r.length>=X){R(`You can have a maximum of ${X} data sources.`);return}d([...r,{label:`Pasted Source ${r.length+1}`,content:"",reportDate:""}])},Ft=c=>{d(r.filter((a,l)=>l!==c))},Ke=G(async c=>{if(!(!m||!s)){Nt(c),Ve(!0),Ye(!0),fe(null),R(null);try{const a=r[C].content,l=await ts(s,a,c,B,p);fe(l)}catch(a){R(`Failed to analyze "${c}": ${a.message}`),fe(null)}finally{Ye(!1)}}},[s,m,C,r,B,p]),Gt=({reportIndex:c})=>{const[a,l]=v(!1),h=ie(null);return ce(()=>{const x=u=>{h.current&&!h.current.contains(u.target)&&l(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]),t("div",{className:"flex justify-end space-x-3",children:[t("button",{onClick:()=>$t(c),disabled:re,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm transition-colors ${re?"bg-emerald-600 text-white":"text-slate-600 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`,children:[re?e(de,{className:"w-5 h-5 mr-2"}):e(nt,{className:"w-5 h-5 mr-2"}),re?"Copied!":"Copy Summary"]}),t("div",{ref:h,className:"relative inline-block text-left",children:[e("div",{children:t("button",{onClick:()=>l(x=>!x),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-500 hover:bg-purple-600",children:[e(we,{className:"w-5 h-5 mr-2"}),"Export Report",e("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),a&&e("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white dark:bg-slate-700 ring-1 ring-black ring-opacity-5 z-10",children:t("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[e("button",{onClick:()=>{zt(c),l(!1)},className:"w-full text-left block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600",role:"menuitem",children:"Export as PDF"}),e("button",{onClick:()=>{Mt(c),l(!1)},className:"w-full text-left block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600",role:"menuitem",children:"Export as DOCX"}),e("button",{onClick:()=>{Dt(c),l(!1)},className:"w-full text-left block px-4 py-2 text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600",role:"menuitem",children:"Export as TXT"})]})})]})]})},jt=()=>{var c,a;if(P||De)return e("div",{className:"flex items-center justify-center h-full min-h-[400px] bg-slate-100 dark:bg-slate-800/50 rounded-lg p-6",children:t("div",{className:"text-center",children:[t("svg",{className:"animate-spin mx-auto h-12 w-12 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e("p",{className:"mt-4 text-lg font-semibold text-slate-700 dark:text-slate-300",children:De?"Analyzing Trends...":"Generating Insights..."}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"The AI is performing a deep analysis. This may take a moment."})]})});if(z&&H.length===2){const l=H.map(h=>{var x;return{label:((x=r[h])==null?void 0:x.label)||`Data ${h+1}`,summary:m[h]}});return e(Rs,{analysis:z,trendChartData:l,startReportLabel:(c=r[H[0]])==null?void 0:c.label,endReportLabel:(a=r[H[1]])==null?void 0:a.label,onClose:()=>{N(null),le([])}})}if(m&&m.length>0&&A&&A.length>0){if(je)return t("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[t("div",{className:"flex flex-wrap gap-2 justify-between items-center mb-4",children:[e("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Select Two Reports for Trend Analysis"}),e("button",{onClick:()=>{ne(!1),le([])},className:"px-3 py-1.5 text-sm font-medium text-slate-600 bg-slate-100 rounded-md hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:"Cancel"})]}),t("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["You have selected ",H.length," of 2 reports."]}),e("div",{className:"mt-4 space-y-2",children:r.map((u,g)=>t("label",{htmlFor:`compare-${g}`,className:`flex items-center p-3 rounded-lg border-2 transition-colors cursor-pointer ${H.includes(g)?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[e("input",{type:"checkbox",id:`compare-${g}`,checked:H.includes(g),disabled:H.length>=2&&!H.includes(g),onChange:()=>Lt(g),className:"h-5 w-5 rounded border-slate-300 text-purple-500 focus:ring-purple-500 disabled:opacity-50"}),e("span",{className:"ml-3 font-medium text-slate-700 dark:text-slate-200 truncate",children:u.label})]},g))}),e("div",{className:"mt-6",children:e("button",{onClick:Bt,disabled:H.length!==2,className:"w-full inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-purple-500 hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-purple-400 disabled:cursor-not-allowed",children:"Generate Trend Analysis"})})]});const l=m[C],h=A[C],x=m.map((u,g)=>{var S;return{label:((S=r[g])==null?void 0:S.label)||`Data ${g+1}`,summary:u}});return t("div",{className:"space-y-6",children:[j&&e(Ds,{comparison:j}),e("div",{className:"bg-white dark:bg-slate-800 p-2 rounded-xl shadow-md",children:t("div",{className:"flex flex-wrap gap-2 justify-between items-center",children:[e("nav",{className:"flex flex-wrap gap-x-1 gap-y-1","aria-label":"Result Tabs",children:r.map((u,g)=>e("button",{onClick:()=>O(g),className:`text-center px-3 py-2 text-sm font-medium rounded-lg transition-colors truncate ${C===g?"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,title:u.label,children:u.label},g))}),m.length>1&&!j&&t("button",{onClick:()=>ne(!0),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-purple-500 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/30 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/50",children:[e(ds,{className:"w-5 h-5"}),e("span",{children:"Analyze Trends"})]})]})}),e(Gt,{reportIndex:C}),e(Ts,{analysis:h,icon:e(Te,{}),iconBgColor:"bg-purple-100 dark:bg-purple-900/50",iconTextColor:"text-purple-500 dark:text-purple-400"}),e(As,{summary:l}),e(Es,{keywords:l.keywords,onKeywordClick:Ke}),m.length>1&&!j&&e(mt,{data:x}),e(vs,{insights:l.insights,icon:e(ot,{}),iconBgColor:"bg-sky-100 dark:bg-sky-900/50",iconTextColor:"text-sky-600 dark:text-sky-400"}),e(ve,{title:"Pros",items:l.pros,icon:e(Ee,{}),iconBgColor:"bg-emerald-100 dark:bg-emerald-900/50",iconTextColor:"text-emerald-600 dark:text-emerald-400",language:B,context:p,apiKey:s||""}),e(ve,{title:"Cons",items:l.cons,icon:e(Re,{}),iconBgColor:"bg-rose-100 dark:bg-rose-900/50",iconTextColor:"text-rose-600 dark:text-rose-400",language:B,context:p,apiKey:s||""}),e(ve,{title:"Common Themes",items:l.themes,icon:e(me,{}),iconBgColor:"bg-amber-100 dark:bg-amber-900/50",iconTextColor:"text-amber-600 dark:text-amber-400",language:B,context:p,apiKey:s||"",onItemClick:Ke})]})}return e("div",{className:"flex items-center justify-center h-full min-h-[400px] bg-slate-100 dark:bg-slate-800/50 rounded-lg p-6",children:t("div",{className:"text-center",children:[e(K,{className:"mx-auto h-16 w-16 text-slate-400 dark:text-slate-500"}),e("h3",{className:"mt-2 text-lg font-medium text-slate-800 dark:text-slate-200",children:"Your analysis will appear here"}),e("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:'Provide some data and click "Analyze" to get started.'})]})})},Vt=()=>{switch(ue){case"upload":return t("div",{className:"space-y-4",children:[e("input",{type:"file",ref:qe,onChange:a=>We(a.target.files),className:"hidden",accept:".csv,.txt,.xlsx,.xls",multiple:!0}),(()=>{switch(gt){case"processing":return t("div",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg bg-slate-50 dark:bg-slate-700/50 border-slate-300 dark:border-slate-600",children:[t("svg",{className:"animate-spin h-12 w-12 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e("p",{className:"mt-4 text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Processing files..."})]});case"success":return t("div",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg bg-emerald-50 dark:bg-emerald-900/20 border-emerald-500",children:[e(de,{className:"w-16 h-16 text-emerald-500 mb-2"}),e("p",{className:"text-lg font-semibold text-emerald-700 dark:text-emerald-200",children:"Upload Successful!"}),e("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Your data is ready."})]});case"idle":default:return t("div",{onClick:()=>{var a;return(a=qe.current)==null?void 0:a.click()},onDragOver:a=>{a.preventDefault(),pe(!0)},onDragLeave:()=>pe(!1),onDrop:a=>{a.preventDefault(),pe(!1),We(a.dataTransfer.files)},className:`flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer transition-all duration-200 ${pt?"border-purple-500 bg-purple-100 dark:bg-purple-900/40 ring-4 ring-offset-2 dark:ring-offset-slate-800 ring-purple-300/50":"border-slate-300 dark:border-slate-600 hover:border-purple-400 dark:hover:border-purple-500 hover:bg-slate-50 dark:hover:bg-slate-800/60"}`,children:[e(as,{className:"w-12 h-12 text-slate-400 mb-4"}),e("p",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Drop files here or click to upload"}),t("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Max ",X," files, ",Ie,"MB each. Supports CSV, TXT, XLSX."]})]})}})(),e("div",{className:"text-center",children:t("button",{onClick:_e,className:"inline-flex items-center text-sm font-medium text-purple-500 dark:text-purple-400 hover:underline",children:[e(we,{className:"w-4 h-4 mr-2"}),"Download CSV Template"]})})]});case"gsheet":return t("div",{className:"space-y-4",children:[t("div",{className:"flex justify-between items-baseline",children:[e("label",{htmlFor:"gsheet-url",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Google Sheet URL"}),t("button",{onClick:_e,type:"button",className:"inline-flex items-center text-xs font-medium text-purple-500 dark:text-purple-400 hover:underline",children:[e(we,{className:"w-3 h-3 mr-1.5"}),"Download Template"]})]}),e("div",{className:"mt-1 flex rounded-md shadow-sm",children:e("input",{type:"url",id:"gsheet-url",value:ee,onChange:a=>ut(a.target.value),className:"flex-1 block w-full rounded-md p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"https://docs.google.com/spreadsheets/d/..."})}),t("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800/60 p-3 rounded-md space-y-1",children:[t("p",{children:[e("strong",{children:"Note:"})," Your sheet must be public via ",e("code",{className:"font-mono text-purple-500 dark:text-purple-400",children:"File > Share > Publish to web"}),"."]}),t("p",{children:["To ensure performance, the app will only process the first ",e("strong",{children:U.toLocaleString()})," characters of data from the sheet."]})]}),e("button",{onClick:Rt,disabled:te.loading,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-500 hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-purple-400",children:te.loading?"Fetching...":"Fetch & Set as Data Source"}),te.error&&e("p",{className:"text-sm text-red-600 dark:text-red-400",children:te.error})]});case"paste":default:return t("div",{className:"space-y-4",children:[r.map((a,l)=>t("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-xl bg-slate-50 dark:bg-slate-800/50 relative group",children:[t("div",{className:"flex justify-between items-center mb-3",children:[e("label",{htmlFor:`source-label-${l}`,className:"sr-only",children:"Source Label"}),e("input",{id:`source-label-${l}`,type:"text",value:a.label,onChange:h=>xe(l,"label",h.target.value),className:"text-md font-semibold bg-transparent focus:outline-none focus:ring-1 focus:ring-purple-500 rounded-sm p-1 -m-1 text-slate-800 dark:text-slate-100"}),e("button",{onClick:()=>Ft(l),className:"text-slate-400 hover:text-rose-500 dark:hover:text-rose-400 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove source",children:e(ms,{className:"w-5 h-5"})})]}),t("div",{className:"space-y-3",children:[t("div",{children:[t("label",{htmlFor:`paste-textarea-${l}`,className:"sr-only",children:["Paste Review Data for ",a.label]}),e("textarea",{id:`paste-textarea-${l}`,value:a.content,onChange:h=>xe(l,"content",h.target.value),placeholder:"Paste raw text here. This can be from a CSV, a document, or even a list of YouTube comments.",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-150 ease-in-out text-sm min-h-40 resize-y"}),t("div",{className:"text-right text-xs text-slate-500 dark:text-slate-400 mt-1 pr-1",children:[a.content.length.toLocaleString()," / ",U.toLocaleString()]})]}),t("div",{children:[e("label",{htmlFor:`report-date-${l}`,className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Report Date/Period"}),e("input",{id:`report-date-${l}`,type:"text",value:a.reportDate||"",onChange:h=>xe(l,"reportDate",h.target.value),placeholder:"e.g., Q3 2024",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 focus:ring-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})]})]})]},l)),r.length<X&&e("button",{onClick:Xe,className:"w-full flex justify-center items-center px-4 py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 text-sm font-medium rounded-lg text-slate-600 dark:text-slate-300 hover:border-purple-500 hover:text-purple-500 dark:hover:text-purple-400 transition-colors",children:"+ Add Another Source"}),r.length===0&&t("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg",children:[e("p",{children:"You have no data sources loaded."}),t("p",{className:"mt-1",children:["Use a tab above, or ",e("button",{onClick:Xe,className:"font-semibold text-purple-500 dark:text-purple-400 hover:underline",children:"add a source"})," to paste text directly."]})]})]})}},Yt=r.length>0&&r.some(c=>c.content.trim());return t("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 font-sans p-4 sm:p-6 lg:p-8",children:[e(zs,{isOpen:n,onSave:Tt}),t("div",{className:"w-full max-w-7xl mx-auto",children:[t("header",{className:"flex flex-col items-center justify-center text-center mb-10 gap-4",children:[t("div",{className:"flex items-center justify-center space-x-3",children:[e(K,{className:"w-8 h-8 text-purple-500"}),t("div",{children:[e("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100",children:"Customer Insights AI"}),e("p",{className:"mt-1 text-slate-600 dark:text-slate-400",children:"Transform feedback into actionable insights."})]})]}),t("div",{className:"flex items-center space-x-2 mt-2",children:[t("button",{onClick:()=>i(!0),className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Manage API Key",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e("path",{d:"M12.94 2.1c.14-.33.5-.54.89-.54s.75.21.89.54l.43 1.01.03.06c.35.81.98 1.45 1.79 1.79l.06.03 1.01.43c.33.14.54.5.54.89s-.21.75-.54.89l-1.01.43-.06.03c-.81.35-1.45.98-1.79 1.79l-.03.06-.43 1.01c-.14.33-.5.54-.89-.54s-.75-.21-.89-.54l-.43-1.01-.03-.06c-.35-.81-.98-1.45-1.79-1.79l-.06-.03-1.01-.43c-.33-.14-.54-.5-.54-.89s.21.75.54-.89l1.01-.43.06-.03c.81-.35 1.45-.98 1.79-1.79l.03-.06.43-1.01zM21 12.49c.29-.12.48-.4.48-.73s-.19-.61-.48-.73l-1.22-.52-.06-.03c-.52-.22-1-.59-1.35-1.04l-.05-.07-.6-1.05c-.12-.21-.34-.35-.58-.35s-.46.14-.58.35l-.6 1.05-.05.07c-.35.45-.83.82-1.35-1.04l-.06.03-1.22.52c-.29.12-.48.4-.48.73s.19.61.48.73l1.22.52.06.03c.52.22 1 .59 1.35 1.04l.05.07.6 1.05c.12.21.34-.35.58-.35s.46-.14-.58-.35l.6-1.05.05-.07c.35-.45.83-.82-1.35-1.04l.06-.03 1.22-.52zM12.5 13.99l-1.5 3c-.15.3-.47.5-.82.5s-.67-.2-.82-.5l-1.5-3c-.15-.3-.15-.65 0-.95l1.5-3c.15-.3.47-.5.82-.5s.67.2.82.5l1.5 3c.15.3.15.65 0 .95z"})}),e("span",{children:"Manage API Key"})]}),t("button",{onClick:()=>Fe(!0),className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",title:"Help",children:[e(cs,{className:"w-5 h-5"}),e("span",{children:"Help"})]})]})]}),t("main",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[t("div",{className:"lg:sticky lg:top-8 space-y-6",children:[t("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[e("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"1. Provide Review Data & Context"}),t("div",{className:"mb-6 border-b border-slate-200 dark:border-slate-700 pb-6",children:[t("label",{htmlFor:"global-context",className:"flex items-center space-x-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[e(ct,{className:"w-4 h-4"}),e("span",{children:"Global Product Context (Optional)"})]}),e("textarea",{id:"global-context",value:p,onChange:c=>b(c.target.value),placeholder:"Provide background info on your product to improve analysis accuracy, e.g., 'AcoustiMax Pro Headphones: Wireless, noise-cancelling, 20-hour battery life.'",className:"mt-2 w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-150 ease-in-out text-sm min-h-24 resize-y"}),e("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"This context will be applied to all data sources in this analysis session."})]}),e("div",{className:"border-b border-slate-200 dark:border-slate-700",children:e("nav",{className:"-mb-px flex flex-wrap items-center gap-x-2 gap-y-1","aria-label":"Tabs",children:[{id:"paste",label:"Paste Text"},{id:"upload",label:"Upload File(s)"},{id:"gsheet",label:"Google Sheet"}].map((c,a)=>t(at.Fragment,{children:[a>0&&e("span",{className:"text-slate-300 dark:text-slate-600",children:"|"}),e("button",{onClick:()=>Z(c.id),className:`px-3 py-2 text-sm font-medium rounded-t-md transition-colors ${ue===c.id?"border-slate-200 dark:border-slate-700 border-b-0 text-purple-500 dark:text-purple-400 bg-white dark:bg-slate-800":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,style:ue===c.id?{marginBottom:"-1px"}:{},children:c.label})]},c.id))})}),e("div",{className:"mt-6",children:Vt()})]}),t("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg space-y-4",children:[e("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"2. Configure & Analyze"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[e("label",{htmlFor:"language-select",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Analysis Language"}),t("select",{id:"language-select",value:B,onChange:c=>ft(c.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 dark:border-slate-600 dark:bg-slate-900 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm rounded-md",children:[e("option",{children:"Auto-detect"}),e("option",{children:"English"}),e("option",{children:"Spanish"}),e("option",{children:"French"}),e("option",{children:"German"}),e("option",{children:"Japanese"}),e("option",{children:"Chinese"}),e("option",{children:"Vietnamese"}),e("option",{children:"Portuguese"}),e("option",{children:"Russian"}),e("option",{children:"Arabic"}),e("option",{children:"Hindi"}),e("option",{children:"Italian"})]})]}),t("div",{children:[t("label",{htmlFor:"segment-column",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Persona/Segment Column ",e("span",{className:"text-xs text-slate-400",children:"(Optional)"})]}),t("div",{className:"relative mt-1",children:[e("input",{type:"text",id:"segment-column",value:W,onChange:c=>ge(c.target.value),placeholder:"e.g., Customer Type",className:"block w-full pl-3 pr-10 py-2 text-base border-slate-300 dark:border-slate-600 dark:bg-slate-900 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm rounded-md"}),e("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:t("button",{type:"button",onClick:Ht,disabled:Le||r.length!==1,className:"p-1.5 text-purple-500 rounded-md hover:bg-purple-100 dark:hover:bg-purple-900/50 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",title:"Suggest column from data header",children:[Le?t("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e(Ae,{className:"w-5 h-5"}),e("span",{className:"sr-only",children:"Suggest Column"})]})})]})]})]}),t("p",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800/60 p-2 rounded-md",children:[e("strong",{children:"For Persona Analysis:"}),' Provide a single CSV data source and enter the exact column name containing your segments. The review text must be in a column named "Comment".']}),t("div",{className:"flex items-center space-x-3 pt-2",children:[e("button",{onClick:It,disabled:P||he||!Yt,className:"flex-grow w-full inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-purple-500 hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-purple-400 disabled:cursor-not-allowed",children:P?"Analyzing...":`Analyze ${r.length} Source(s)`}),e("button",{onClick:Et,disabled:P||he,title:"Generate sample data with personas","aria-label":"Generate sample review data with personas",className:"p-3 inline-flex justify-center items-center border border-slate-300 dark:border-slate-600 text-sm font-medium rounded-md shadow-sm bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50",children:e(Ae,{className:`h-6 w-6 text-purple-500 ${he?"animate-spin":""}`})})]}),Oe&&e("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 text-center",children:Oe})]})]}),e("div",{className:"results-section space-y-4",children:jt()})]}),t("footer",{className:"text-center mt-12 py-4 text-sm text-slate-500 dark:text-slate-400",children:[t("div",{className:"flex justify-center items-center space-x-6 mb-4",children:[e("a",{href:"https://www.youtube.com/@luke1618gamer",target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:text-purple-500 transition-colors",title:"YouTube",children:"YouTube"}),e("a",{href:"https://www.tiktok.com/@hoangcao2704",target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:text-purple-500 transition-colors",title:"TikTok",children:"TikTok"}),e("a",{href:"https://www.linkedin.com/in/hoangminhcao",target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:text-purple-500 transition-colors",title:"LinkedIn",children:"LinkedIn"})]}),"© 2025 Developed by MrLuke1618. All rights reserved."]}),e(Is,{isOpen:bt,onClose:()=>Fe(!1)}),e($s,{isOpen:yt,onClose:()=>Ve(!1),topic:kt,analysis:Ct,isLoading:St}),!P&&m&&!je&&t(rt,{children:[e("button",{onClick:()=>He(!0),className:"fixed bottom-8 right-8 bg-purple-500 text-white p-4 rounded-full shadow-lg hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-transform hover:scale-110","aria-label":"Open chat to ask about your data",children:e(it,{className:"w-8 h-8"})}),e(Ns,{isOpen:xt,onClose:()=>He(!1),messages:wt,onSendMessage:Ot,isLoading:vt,title:`Ask about ${((Je=r[C])==null?void 0:Je.label)||"Your Data"}`,onGenerateQuestions:Pt,isGeneratingQuestions:At})]})]})]})},ht=document.getElementById("root");if(!ht)throw new Error("Could not find root element to mount to");const Ps=Wt.createRoot(ht);Ps.render(e(at.StrictMode,{children:e(Os,{})}));
